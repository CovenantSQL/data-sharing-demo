(function(t){function e(e){for(var i,o,s=e[0],l=e[1],d=e[2],u=0,f=[];u<s.length;u++)o=s[u],r[o]&&f.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(f.length)f.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},r={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/data-sharing-demo/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("1356"),r=a.n(i);r.a},1356:function(t,e,a){},"41db":function(t,e,a){},4900:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),r=a("bc3a"),n=a.n(r),o=a("bb71");a("da64");i["default"].use(o["a"],{iconfont:"md"});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:{name:"home"}}},[t._v("Home")]),t._v("\n    |\n    "),a("router-link",{attrs:{to:{name:"about"}}},[t._v("About")]),t.isLoggedIn?a("span",[t._v(" | "),a("a",{on:{click:t.logout}},[t._v("Logout "+t._s(t.user))])]):t._e()],1),a("notifications",{attrs:{group:"login",position:"bottom right"}}),a("notifications",{attrs:{group:"crud",position:"bottom right"}}),a("router-view")],1)},l=[],d={data:function(){return{user:""}},name:"App",computed:{isLoggedIn:function(){return this.initialize(),this.$store.getters.isLoggedIn}},created:function(){this.initialize()},methods:{initialize:function(){this.user=localStorage.getItem("user")},logout:function(){var t=this;this.user="",this.$store.dispatch("logout").then(function(){t.$router.push({name:"login"})})}}},c=d,u=(a("034f"),a("2877")),f=a("6544"),m=a.n(f),h=a("7496"),v=Object(u["a"])(c,s,l,!1,null,null,null),p=v.exports;m()(v,{VApp:h["a"]});var g=a("8c4f"),x=a("2f62");i["default"].use(x["a"]);var b=new x["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request:function(t){t.status="loading"},auth_success:function(t,e,a){t.status="success",t.token=e,t.user=a},auth_error:function(t){t.status="error"},logout:function(t){t.status="",t.token=""}},actions:{login:function(t,e){var a=t.commit;return new Promise(function(t,i){a("auth_request"),n.a.post("/apiv1/login",e).then(function(e){var i=e.data.token,r=e.data.user;localStorage.setItem("token",i),localStorage.setItem("user",r),n.a.defaults.headers.common["Authorization"]=i,a("auth_success",i,r),t(e)}).catch(function(t){a("auth_error"),localStorage.removeItem("token"),localStorage.removeItem("user"),i(t)})})},logout:function(t){var e=t.commit;return new Promise(function(t){e("logout"),n()({url:"/apiv1/logout",method:"POST"}).finally(function(){localStorage.removeItem("token"),delete n.a.defaults.headers.common["Authorization"],t()})})}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}}),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Crud")],1)},_=[],w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-card",[a("arch-chart",{ref:"archchart"})],1),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("div",{attrs:{id:"app"}},[a("div",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("疫苗供应链管理 Demo")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-flex",{attrs:{xs12:"",sm4:"",md4:"","offset-xs4":""}},[a("v-text-field",{attrs:{label:"端到端密钥",hint:"密码仅保存在浏览器端"},model:{value:t.e2eePass,callback:function(e){t.e2eePass=e},expression:"e2eePass"}})],1),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"#666",dark:""}},i),[t._v("Add")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}}),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Serial"},model:{value:t.editedItem.serial,callback:function(e){t.$set(t.editedItem,"serial",e)},expression:"editedItem.serial"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Factory"},model:{value:t.editedItem.factory,callback:function(e){t.$set(t.editedItem,"factory",e)},expression:"editedItem.factory"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g({attrs:{label:"Date",readonly:""},model:{value:t.editedItem.date,callback:function(e){t.$set(t.editedItem,"date",e)},expression:"editedItem.date"}},i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.editedItem.date,callback:function(e){t.$set(t.editedItem,"date",e)},expression:"editedItem.date"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.date)}}},[t._v("OK")])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Batch"},model:{value:t.editedItem.batch,callback:function(e){t.$set(t.editedItem,"batch",e)},expression:"editedItem.batch"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Carrier"},model:{value:t.editedItem.carrier,callback:function(e){t.$set(t.editedItem,"carrier",e)},expression:"editedItem.carrier"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"ColdVan"},model:{value:t.editedItem.cold_van,callback:function(e){t.$set(t.editedItem,"cold_van",e)},expression:"editedItem.cold_van"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Distributor"},model:{value:t.editedItem.distributor,callback:function(e){t.$set(t.editedItem,"distributor",e)},expression:"editedItem.distributor"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Hospital"},model:{value:t.editedItem.hospital,callback:function(e){t.$set(t.editedItem,"hospital",e)},expression:"editedItem.hospital"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{label:"Patient"},model:{value:t.editedItem.patient,callback:function(e){t.$set(t.editedItem,"patient",e)},expression:"editedItem.patient"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[a("v-text-field",{attrs:{disabled:"",label:"Attach"},model:{value:t.editedItem.attach_uri,callback:function(e){t.$set(t.editedItem,"attach_uri",e)},expression:"editedItem.attach_uri"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"",md8:""}},[a("v-text-field",{attrs:{disabled:"",label:"CheckSum"},model:{value:t.editedItem.attach_sum,callback:function(e){t.$set(t.editedItem,"attach_sum",e)},expression:"editedItem.attach_sum"}})],1)],1)],1)],1),[a("div",{attrs:{id:"dropUpload"}},[a("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"uploadField",thumbnailHeight:"80",thumbnailWidth:"80",options:t.dropOptions},on:{"vdropzone-success":t.UploadSuccess}})],1)],a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("Save")])],1)],2)],1)],1),a("v-data-table",{staticClass:"crud",attrs:{headers:t.headers,items:t.items,expand:t.expand,loading:t.loadingMain,"rows-per-page-items":t.rowsPerPage},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{on:{click:function(a){return t.expendItem(e)}}},[a("td",[t._v(t._s(e.item.id))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.serial))]),a("td",{staticClass:"text-xs-left factory-cell"},[t._v(t._s(e.item.factory))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.date))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.batch))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.carrier))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.cold_van))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.distributor))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.hospital))]),a("td",{staticClass:"text-xs-left patient-cell"},[t._v(t._s(e.item.patient))]),a("td",{staticClass:"justify-center px-0"},[e.item.attach_uri?a("span",[a("v-icon",{attrs:{color:"#bbb",small:""}},[t._v("attach_file")])],1):t._e()]),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-1",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("\n                  edit\n                ")]),a("v-icon",{staticClass:"mr-3",attrs:{small:""},on:{click:function(a){return t.deleteItem(e.item)}}},[t._v("\n                  delete\n                ")])],1)])]}},{key:"expand",fn:function(e){return[a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:"",sm6:"",md9:"","offset-sm1":""}},[a("v-list",{attrs:{loading:!1,dense:"","two-line":""}},[t._l(t.expandItems,function(e,i){return[a("v-list-tile",{key:e.id,attrs:{avatar:"",ripple:""},on:{click:function(a){return t.goExplorer(e.hash)}}},[a("v-list-tile-content",[a("v-icon",{attrs:{small:""}},[t._v("verified_user")]),a("v-list-tile-title",[a("div",[a("prism",{attrs:{language:"sql",code:e.sql}})],1)]),a("v-list-tile-sub-title",[a("v-icon",{attrs:{small:""}},[t._v("fingerprint")]),t._v("\n                          "+t._s(e.hash)+"\n                        ")],1)],1),a("v-list-tile-action",[a("v-list-tile-action-text",[t._v(t._s(e.user))]),a("v-icon",[t._v("\n                          storage\n                        ")])],1)],1),i+1<t.items.length?a("v-divider",{key:i}):t._e()]})],2)],1)],1)]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reload")])]},proxy:!0}])},[a("v-progress-linear",{attrs:{color:"blue",indeterminate:""},scopedSlots:t._u([{key:"progress",fn:function(){},proxy:!0}])})],1)],1)])],1)},I=[],k=(a("ac6a"),a("456d"),a("34ef"),a("92c3")),$=a.n(k),C=(a("c197"),a("a878"),a("8d51")),V=a.n(C),P=(a("af8a"),16),S=a("156f"),A=a("7247"),L=a("7d92"),T=new Uint8Array([63,184,135,125,55,253,192,78,74,71,101,239,184,171,125,54]);function O(t){if("string"==typeof t){for(var e=t.length,a=new Uint8Array(e),i=0;i!=e;++i)a[i]=t.charCodeAt(i);return a}return t}function E(t){var e=L.sha256().update(L.sha256().update(t).update(T).digest()).digest();return new Uint8Array(e.slice(0,P))}function z(t){for(var e=new Uint8Array(t),a=0;a!=t;++a)e[a]=Math.floor(256*Math.random());return e}function M(t){return S.pad(O(t))}function j(t){if(!t||t.length<P)throw new Error("invalid pkcs#7 data");var e=t[t.length-1];if(e>P)throw new Error("invalid pkcs#7 padding length");return S.unpad(t)}function F(t,e){var a=E(e),i=z(P),r=new A.ModeOfOperation.cbc(a,i),n=M(t),o=new Uint8Array(i.length+n.length),s=r.encrypt(n);if(!s||!s.length)throw new Error("encrypt failed");return o.set(i),o.set(s,i.length),o}function D(t,e){var a=E(e),i=O(t);if(i.length<2*P)throw new Error("invalid cipher");var r=i.slice(0,P),n=new A.ModeOfOperation.cbc(a,r),o=n.decrypt(i.slice(P));if(!o||!o.length||o.length!=i.length-P)throw new Error("invalid decrypted data");return j(new Uint8Array(o))}function U(t,e){var a=D(t,e);return A.utils.utf8.fromBytes(a)}var q={encrypt:F,decrypt:D,decrypt_string:U},B=q,R=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arch"}},[a("div",{attrs:{id:"chart"}})])}],Q=(a("7514"),{name:"Arch",data:function(){return{frame_num:0,currentFrame:null}},mounted:function(){},methods:{load:function(t){0===this.frame_num&&(window.archPlayer.layout(new window.Layout("#chart")),window.archPlayer.model(new window.Model),window.archPlayer.resizeable(!0),window.archPlayer.addEventListener("tick",function(){window.archPlayer.current().model().tick(window.archPlayer.current().playhead()),window.archPlayer.layout().messages.invalidate(),window.archPlayer.layout().nodes.invalidateElectionTimers()}),window.archPlayer.frame(this.frame_num,"Log Replication"+this.frame_num,this.initFrame())),window.archPlayer.next(),this.newFrame(t)(window.archPlayer.current()),this.frame_num+=1},initFrame:function(){return function(t){this.currentFrame=t;var e=t.player(),a=t.layout(),i=function(){return t.model()},r=function(t){i().nodes.toArray().forEach(function(e){e.cluster(t)})};t.after(0,function(){i().clear()}).after(0,function(){t.model().title='<h2 style="visibility:visible">Log Replication</h1><br/>'+t.model().controls.html()}).after(0,function(){i().title=""}).after(0,function(){i().nodes.create("A"),i().nodes.create("B"),i().nodes.create("C"),r(["A","B","C"]),i().clients.create("X"),a.invalidate()}).after(200,function(){i().forceImmediateLeader()}),e.play()}},newFrame:function(t){return function(e){var a=e.player(),i=e.layout(),r=function(){return e.model()},n=function(t){return e.model().clients.find(t)},o=function(t,e){r().subtitle=t+r().controls.html(),i.invalidate(),void 0===e&&r().controls.show()};e.after(500,function(){o("<h2>"+t+"</h2>",!1),n("X").send(r().leader(),t)}).at(r(),"appendEntriesRequestsSent",function(){}).at(r(),"commitIndexChange",function(t){return t.target!==r().leader()}).after(2*r().defaultNetworkLatency,function(){o("<h2>Committed</h2>")}),a.play()}}}}),N=Q,J=(a("71b1"),Object(u["a"])(N,R,H,!1,null,"5c976f00",null)),W=J.exports,X=a("7247"),Z={data:function(){return{e2eePass:"",dropOptions:{url:n.a.defaults.baseURL+"/apiv1/attach",maxFilesize:20,maxFiles:1,chunking:!1,chunkSize:500,thumbnailWidth:100,thumbnailHeight:100,addRemoveLinks:!0,headers:{Authorization:localStorage.getItem("token")}},haveAttach:!1,isMounted:!1,expand:!1,loadingMain:!0,rowsPerPage:[20,50,100,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],menu:"",date:"",picker:"",formatted:"",dialog:!1,headers:[{text:"ID",value:"id",align:"left"},{text:"Serial",value:"serial",align:"left"},{text:"Factory",value:"factory",align:"left"},{text:"Date",value:"date"},{text:"Batch",value:"batch"},{text:"Carrier",value:"carrier"},{text:"ColdVan",value:"cold_van"},{text:"Distributor",value:"distributor"},{text:"Hospital",value:"hospital"},{text:"Patient",value:"patient"}],items:[],expandItems:[],editedIndex:-1,editedItem:{serial:"",factory:"",date:"",batch:"",carrier:"",cold_van:"",distributor:"",hospital:"",patient:"",attach_uri:"",attach_sum:""},defaultItem:{serial:"",factory:"",date:"",batch:"",carrier:"",cold_van:"",distributor:"",hospital:"",patient:"",attach_uri:"",attach_sum:""}}},components:{vueDropzone:$.a,Prism:V.a,archChart:W},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},mounted:function(){localStorage.e2eePass&&(this.e2eePass=localStorage.e2eePass)},watch:{dialog:function(t){t||this.close()},e2eePass:function(t){localStorage.e2eePass=t}},created:function(){this.initialize()},methods:{animateCQL:function(t){this.$refs.archchart.load(t)},to_hex:function(t){return X.utils.hex.fromBytes(t)},from_hex:function(t){return new Uint8Array(X.utils.hex.toBytes(t))},UploadZoneMount:function(){var t={size:0,name:this.editedItem.attach_uri},e=n.a.defaults.baseURL+"/apiv1/attach/"+this.editedItem.attach_uri;this.$log.debug(t,e),this.$refs.myVueDropzone.manuallyAddFile(t,e),this.isMounted=!0},UploadSuccess:function(t,e){this.success=!0,this.$log.debug(e),this.editedItem.attach_uri=e.attach_uri,this.editedItem.attach_sum=e.attach_sum},initialize:function(){var t=this;this.loadingMain=!0,n.a.defaults.headers.common["Authorization"]=localStorage.getItem("token"),n.a.get("/apiv1/cargo").then(function(e){t.items=e.data,null==e.data&&t.$notify({group:"crud",type:"error",title:"获取信息失败",text:"no cargo got"}),t.loadingMain=!1,t.$log.debug(e)}).catch(function(e){t.$notify({group:"crud",type:"error",title:"获取信息失败",text:e.response.data}),t.loadingMain=!1,t.$log.error(e)})},expendItem:function(t){var e=this;this.loadingMain=!0,n.a.defaults.headers.common["Authorization"]=localStorage.getItem("token"),n.a.get("/apiv1/sql",{params:{cargo_id:t.item.id,limit:10}}).then(function(a){e.expandItems=a.data,null!==a.data&&(t.expanded=!t.expanded),e.loadingMain=!1,e.$log.debug(a)}).catch(function(t){e.$notify({group:"crud",type:"error",title:"获取区块链上的 SQL 记录失败",text:t.response.data}),e.loadingMain=!1,e.$log.error(t)})},goExplorer:function(t){var e=i["default"].prototype.$explorerBASE+"966c4a297ff996772ef1b7f7ba13f1a1fab95bb4589f9e2236d37cbc83ac38bd/requests/";window.open(e+t,"_blank")},editItem:function(t){for(var e in n.a.defaults.headers.common["Authorization"]=localStorage.getItem("token"),this.editedIndex=this.items.indexOf(t),t){var a=t[e];if("patient"===e&&null!==a)try{this.editedItem[e]=B.decrypt_string(this.from_hex(a),this.e2eePass)}catch(i){this.$notify({group:"crud",type:"error",title:"解密敏感信息失败",text:i})}else this.editedItem[e]=a}this.$log.debug("edit: ",this.editedIndex,t),this.dialog=!0,null!==t["attach_uri"]&&this.UploadZoneMount()},deleteItem:function(t){var e=this,a=this.items.indexOf(t),i=t.id;confirm("Are you sure you want to delete this item?")&&n.a.delete("/apiv1/cargo/"+i).then(function(t){e.$log.debug(t),e.animateCQL(t.data.cql),e.items.splice(a,1)}).catch(function(t){e.$notify({group:"crud",type:"error",title:"删除信息失败",text:t.response.data}),e.$log.error(t)})},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.$refs.myVueDropzone.removeAllFiles(),t.editedIndex=-1},300)},save:function(){var t=this;if(this.editedIndex>-1){var e={};for(var a in this.editedItem){var i=this.items[this.editedIndex];if(!(a in i)||this.editedItem[a]!==i[a]){var r=this.editedItem[a];if(this.$log.debug(r,i[a]),"patient"===a){if(null!==i[a]){var o=B.decrypt_string(this.from_hex(i[a]),this.e2eePass);if(r===o)continue}var s=(new TextEncoder).encode(r);e[a]=this.to_hex(B.encrypt(s,this.e2eePass))}else e[a]=r}}Object.keys(e).length>0&&(e["id"]=this.editedItem.id,this.$log.debug(e),n.a.put("/apiv1/cargo",e).then(function(e){t.$log.debug(e),t.animateCQL(e.data.cql),t.initialize(),t.$refs.myVueDropzone.removeAllFiles()}).catch(function(e){t.$notify({group:"crud",type:"error",title:"修改信息失败",text:e.response.data}),t.$log.error(e)}))}else{var l={};for(var d in this.editedItem)if(d in this.defaultItem&&this.editedItem[d]!==this.defaultItem[d]){var c=this.editedItem[d];if("patient"===d){var u=(new TextEncoder).encode(c);l[d]=this.to_hex(B.encrypt(u,this.e2eePass))}else l[d]=c}Object.keys(l).length>0&&(this.$log.debug(l),n.a.post("/apiv1/cargo",l).then(function(e){t.$log.debug(e),t.animateCQL(e.data.cql),t.items.push(t.editedItem),t.initialize()}).catch(function(e){t.$notify({group:"crud",type:"error",title:"创建新条目失败",text:e.response.data}),t.$log.error(e)}))}this.close()}}},K=Z,G=(a("9878"),a("8336")),Y=a("b0af"),tt=a("99d9"),et=a("12b2"),at=a("a523"),it=a("8fea"),rt=a("2e4b"),nt=a("169a"),ot=a("ce7e"),st=a("0e8f"),lt=a("132d"),dt=a("a722"),ct=a("8860"),ut=a("ba95"),ft=a("40fe"),mt=a("5d23"),ht=a("e449"),vt=a("8e36"),pt=a("9910"),gt=a("2677"),xt=a("71d9"),bt=a("2a7f"),yt=Object(u["a"])(K,w,I,!1,null,null,null),_t=yt.exports;m()(yt,{VBtn:G["a"],VCard:Y["a"],VCardActions:tt["a"],VCardText:tt["b"],VCardTitle:et["a"],VContainer:at["a"],VDataTable:it["a"],VDatePicker:rt["a"],VDialog:nt["a"],VDivider:ot["a"],VFlex:st["a"],VIcon:lt["a"],VLayout:dt["a"],VList:ct["a"],VListTile:ut["a"],VListTileAction:ft["a"],VListTileActionText:mt["a"],VListTileContent:mt["b"],VListTileSubTitle:mt["c"],VListTileTitle:mt["d"],VMenu:ht["a"],VProgressLinear:vt["a"],VSpacer:pt["a"],VTextField:gt["a"],VToolbar:xt["a"],VToolbarTitle:bt["a"]});var wt={name:"home",components:{Crud:_t}},It=wt,kt=Object(u["a"])(It,y,_,!1,null,null,null),$t=kt.exports,Ct=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Vt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"about"},[a("h1",[t._v("This is an about page")])])}],Pt={},St=Object(u["a"])(Pt,Ct,Vt,!1,null,null,null),At=St.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v("Login form")])],1),a("v-card-text",[a("v-form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("v-text-field",{attrs:{"prepend-icon":"person",name:"user",label:"user",type:"text"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),a("v-text-field",{attrs:{"prepend-icon":"lock",name:"password",label:"password",id:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)],1)],1)],1)},Tt=[],Ot=(a("6b54"),{data:function(){return{user:"",password:""}},methods:{login:function(){var t=this,e=this.user,a=this.password;this.$store.dispatch("login",{user:e,password:a}).then(function(){return t.$router.push({name:"home"})}).catch(function(e){return t.$notify({group:"login",type:"error",title:"Login failed",text:e.toString()}),t.$log.error(e)})}}}),Et=Ot,zt=a("549c"),Mt=a("4bd4"),jt=Object(u["a"])(Et,Lt,Tt,!1,null,null,null),Ft=jt.exports;m()(jt,{VBtn:G["a"],VCard:Y["a"],VCardActions:tt["a"],VCardText:tt["b"],VContainer:at["a"],VContent:zt["a"],VFlex:st["a"],VForm:Mt["a"],VLayout:dt["a"],VSpacer:pt["a"],VTextField:gt["a"],VToolbar:xt["a"],VToolbarTitle:bt["a"]}),i["default"].use(g["a"]);var Dt=new g["a"]({mode:"hash",routes:[{path:"/",name:"home",component:$t,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:Ft},{path:"/arch",name:"arch",component:W},{path:"/about",name:"about",component:At}]});Dt.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth})){if(b.getters.isLoggedIn)return void a();a("login")}else a()});var Ut=Dt,qt=a("85ff"),Bt=a.n(qt),Rt=a("ee98"),Ht=a.n(Rt),Qt=(a("1e3f"),!0);Qt?(n.a.defaults.baseURL="//api.gridb.io:7790",i["default"].prototype.$explorerBASE="http://demo-explorer.gridb.io:8083/dbs/"):i["default"].prototype.$explorerBASE="http://localhost:8082/dbs/";var Nt={isEnabled:!0,logLevel:Qt?"error":"debug",stringifyArguments:!1,showLogLevel:!0,showMethodName:!0,separator:"|",showConsoleColors:!0};i["default"].use(Ht.a),i["default"].use(Bt.a,Nt),i["default"].prototype.$http=n.a,i["default"].config.productionTip=!1,new i["default"]({router:Ut,store:b,render:function(t){return t(p)}}).$mount("#app")},"71b1":function(t,e,a){"use strict";var i=a("4900"),r=a.n(i);r.a},9878:function(t,e,a){"use strict";var i=a("41db"),r=a.n(i);r.a}});
//# sourceMappingURL=app.ccdede1b.js.map